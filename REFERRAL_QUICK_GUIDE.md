# üöÄ –†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê 2.0 - –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

## ‚úÖ –ë–≠–ö–ê–ü –°–û–ó–î–ê–ù
üìÅ `/root/home/momsclub_backup_22112025` (1.5GB)

–û—Ç–∫–∞—Ç:
```bash
cd /root/home && systemctl stop telegram-bot && rm -rf momsclub && cp -r momsclub_backup_22112025 momsclub && systemctl start telegram-bot
```

---

## üìã 5 –≠–¢–ê–ü–û–í –†–ê–ó–†–ê–ë–û–¢–ö–ò

### –≠–¢–ê–ü 1: –ë–ê–ó–ê –î–ê–ù–ù–´–• (2-3—á)
- models.py: User + 3 –ø–æ–ª—è, ReferralReward, WithdrawalRequest
- migrations/add_referral_system_v2.py
- crud.py: 8 —Ñ—É–Ω–∫—Ü–∏–π

### –≠–¢–ê–ü 2: –í–´–ë–û–† –ù–ê–ì–†–ê–î–´ (2-3—á)
- constants.py: REFERRAL_MONEY_PERCENT, MIN_WITHDRAWAL_AMOUNT
- webhook_handlers.py: send_referral_reward_choice()
- user_handlers.py: ref_reward_money, ref_reward_days

### –≠–¢–ê–ü 3: –õ–ò–ß–ù–´–ô –ö–ê–ë–ò–ù–ï–¢ (1-2—á)
- user_handlers.py: –æ–±–Ω–æ–≤–∏—Ç—å process_referral_program()
- user_handlers.py: ref_history

### –≠–¢–ê–ü 4: –í–´–í–û–î –°–†–ï–î–°–¢–í (2—á)
- user_handlers.py: WithdrawalStates FSM
- user_handlers.py: ref_withdraw, withdraw_card, withdraw_sbp

### –≠–¢–ê–ü 5: –ê–î–ú–ò–ù–ö–ê (2—á)
- admin/withdrawals.py: –Ω–æ–≤—ã–π —Ñ–∞–π–ª
- core.py: –∫–Ω–æ–ø–∫–∞ –≤ –º–µ–Ω—é
- bot.py: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–∞

---

## üéØ –ö–õ–Æ–ß–ï–í–´–ï –§–ò–ß–ò

‚úÖ –í—ã–±–æ—Ä: üí∞ –î–µ–Ω—å–≥–∏ (10-20%) –ò–õ–ò üìÖ 7 –¥–Ω–µ–π
‚úÖ –ü—Ä–æ—Ü–µ–Ω—Ç—ã –ø–æ —É—Ä–æ–≤–Ω—è–º: none=10%, silver=15%, gold=20%, platinum=20%
‚úÖ –ë–∞–ª–∞–Ω—Å –≤ –õ–ö —Å –∏—Å—Ç–æ—Ä–∏–µ–π –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π
‚úÖ –í—ã–≤–æ–¥ –æ—Ç 500‚ÇΩ (–∫–∞—Ä—Ç–∞/–°–ë–ü)
‚úÖ –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∞–¥–º–∏–Ω–∞–º–∏
‚úÖ –ó–∞—â–∏—Ç–∞: –∞–¥–º–∏–Ω—ã/–±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–µ –ø–æ–ª—É—á–∞—é—Ç –¥–µ–Ω—å–≥–∏

---

## üìù –§–ê–ô–õ–´ –î–õ–Ø –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã (—Å–æ–∑–¥–∞—Ç—å):
1. database/migrations/add_referral_system_v2.py
2. utils/referral_helpers.py ‚≠ê (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
3. utils/referral_messages.py ‚≠ê (–≤—Å–µ —Ç–µ–∫—Å—Ç—ã)
4. handlers/admin/withdrawals.py

### –ò–∑–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ:
5. database/models.py
6. database/crud.py
7. utils/constants.py
8. webhook_handlers.py
9. handlers/user_handlers.py
10. handlers/admin/core.py
11. handlers/admin/__init__.py
12. bot.py

‚≠ê **–ß–ò–°–¢–´–ô –ö–û–î:** –í—Å—è –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –ø–æ —Å–ª–æ—è–º!

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

1. –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞
2. –î—Ä—É–≥ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç
3. –í—ã–±—Ä–∞—Ç—å –¥–µ–Ω—å–≥–∏ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å
4. –í—ã–±—Ä–∞—Ç—å –¥–Ω–∏ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
5. –ê–¥–º–∏–Ω –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–±—Ä–∞—Ç—å –¥–µ–Ω—å–≥–∏ ‚Üí –±–ª–æ–∫
6. –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤—ã–≤–æ–¥
7. –ê–¥–º–∏–Ω –æ–¥–æ–±—Ä—è–µ—Ç/–æ—Ç–∫–ª–æ–Ω—è–µ—Ç
8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üìä –ü–†–û–ì–†–ï–°–°

- [ ] –≠–¢–ê–ü 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [ ] –≠–¢–ê–ü 2: –í—ã–±–æ—Ä –Ω–∞–≥—Ä–∞–¥—ã
- [ ] –≠–¢–ê–ü 3: –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
- [ ] –≠–¢–ê–ü 4: –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤
- [ ] –≠–¢–ê–ü 5: –ê–¥–º–∏–Ω–∫–∞
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –†–ï–õ–ò–ó üéâ

---

**–î–µ—Ç–∞–ª–∏ –≤ 3 —Ñ–∞–π–ª–∞—Ö:**
- REFERRAL_TODO_PART1.md - –≠—Ç–∞–ø—ã 1-2
- REFERRAL_TODO_PART2.md - –≠—Ç–∞–ø—ã 3-5
- REFERRAL_TODO_PART3.md - –¢–µ–∫—Å—Ç—ã + —á–µ–∫-–ª–∏—Å—Ç

**–ù–∞—á–∏–Ω–∞–µ–º?** üöÄ
